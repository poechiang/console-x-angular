<ul class="main-menu" nz-menu nzMode="inline" [nzInlineCollapsed]="isCollapsed">
  <ng-container *ngTemplateOutlet="menuItemTpl; context: { $implicit: menuList }"></ng-container>

  <ng-template #menuItemTpl let-menus>
    @for (menu of menus; track menu) {
      @if (!menu.children) {
        <li
          nz-menu-item
          [nzPaddingLeft]="menu.level * 24"
          [nzDisabled]="menu.disabled"
          [nzSelected]="menu.selected"
          [routerLink]="menu.link"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{ exact: true }"
          [nzMatchRouter]="menu.matchRouter"
        >
          <ng-container *ngTemplateOutlet="menuTitleTpl"></ng-container>
        </li>
      } @else {
        <li
          nz-submenu
          [nzPaddingLeft]="menu.level * 24"
          [nzTitle]="menuTitleTpl"
          [nzOpen]="menu.open"
          [routerLink]="menu.link"
          [nzDisabled]="menu.disabled"
        >
          <ul>
            <ng-container *ngTemplateOutlet="menuItemTpl; context: { $implicit: menu.children }" />
          </ul>
        </li>
      }

      <ng-template #menuTitleTpl>
        <cx-icon [icon]="menu.icon" [class.mr-8]="true"></cx-icon>
        {{ menu.title }}
      </ng-template>
    }
  </ng-template>
</ul>
